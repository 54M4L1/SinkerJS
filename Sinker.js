const e=document.getElementById("user-input"),t=document.getElementById("chat-box"),o=document.getElementById("send-btn"),n=document.getElementById("loading"),s=document.getElementById("open-modal-btn"),c=document.getElementById("close-modal-btn"),i=document.getElementById("model-modal");let r=[];function a(){""===e.value.trim()?(o.style.display="none",s.style.display="inline-block"):(o.style.display="inline-block",s.style.display="none")}function u(e,o){const n=document.createElement("div");n.className=`message ${e}`;const s=/[\u0600-\u06FF]/.test(o);n.style.fontFamily=s?"Cairo, sans-serif":"inherit",n.style.direction=s?"rtl":"ltr",n.style.textAlign=s?"right":"left","bot-message"===e?(n.innerHTML=o,t.appendChild(n),setTimeout((()=>{n.classList.add("show")}),10)):(n.textContent=o,t.appendChild(n)),t.scrollTop=t.scrollHeight}function m(e){const t=document.getElementById("error-message");""===e?t.style.display="none":(t.textContent=e,t.style.display="block",setTimeout((()=>{t.style.display="none"}),5e3))}e.addEventListener("keypress",(function(s){"Enter"===s.key&&async function(){const s=e.value.trim();if(m(""),""!==s){if(0===r.length&&r.push({sender:"system",message:"Let\u2019s dive into an exciting conversation together! \ud83c\udf1f Whether you seek the secrets of the universe, the wonders of technology, or the mysteries of the mystical realms, I\u2019m here to explore them all with you. Get ready for deep thoughts, curious discoveries, and a touch of magic\u2014let\u2019s make this chat unforgettable!"}),/[\u0600-\u06FF]/.test(s)){const e="\ud83c\udf1f \u0644\u0646\u063a\u0645\u0631 \u0645\u0639\u064b\u0627 \u0641\u064a \u0645\u062d\u0627\u062f\u062b\u0629 \u0645\u062b\u064a\u0631\u0629! \u0633\u0648\u0627\u0621 \u0643\u0646\u062a \u062a\u0628\u062d\u062b \u0639\u0646 \u0623\u0633\u0631\u0627\u0631 \u0627\u0644\u0643\u0648\u0646\u060c \u0623\u0648 \u0639\u062c\u0627\u0626\u0628 \u0627\u0644\u062a\u0643\u0646\u0648\u0644\u0648\u062c\u064a\u0627\u060c \u0623\u0648 \u0623\u0633\u0631\u0627\u0631 \u0627\u0644\u0639\u0648\u0627\u0644\u0645 \u0627\u0644\u0631\u0648\u062d\u0627\u0646\u064a\u0629\u060c \u0641\u0623\u0646\u0627 \u0647\u0646\u0627 \u0644\u0627\u0633\u062a\u0643\u0634\u0627\u0641 \u0643\u0644 \u0630\u0644\u0643 \u0645\u0639\u0643. \u0627\u0633\u062a\u0639\u062f \u0644\u0623\u0641\u0643\u0627\u0631 \u0639\u0645\u064a\u0642\u0629\u060c \u0648\u0627\u0643\u062a\u0634\u0627\u0641\u0627\u062a \u0645\u062b\u064a\u0631\u0629\u060c \u0648\u0644\u0645\u0633\u0629 \u0645\u0646 \u0627\u0644\u0633\u062d\u0631\u2014\u0644\u0646\u0635\u0646\u0639 \u0645\u0639\u064b\u0627 \u0645\u062d\u0627\u062f\u062b\u0629 \u0644\u0627 \u062a\u064f\u0646\u0633\u0649! ";r.some((t=>"system"===t.sender&&t.message===e))||r.push({sender:"system",message:e})}r.push({sender:"user",message:s},{model:"grok-beta",stream:1}),u("user-message",s),e.value="",o.disabled=1,n.classList.add("show");try{const e=(await puter.ai.chat(r.map((e=>e.message)).join("\n"))).message.content;r.push({sender:"bot",message:e}),u("bot-message",marked.parse(e))}catch(e){m("It seems there is an issue with your connection to our server. Please reload the page or try again later.")}finally{o.disabled=0,n.classList.remove("show"),t.scrollTop=t.scrollHeight}}else m("Invalid text value.")}()})),s.addEventListener("click",(function(){i.style.display="block"})),c.addEventListener("click",(function(){i.style.display="none"})),window.addEventListener("click",(function(e){e.target===i&&(i.style.display="none")})),setInterval(a,1),a();
